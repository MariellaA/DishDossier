<RecipeCard>:
    #orientation: "horizontal"
    size_hint_y: None
    height: dp(100)
    spacing: dp(10)
    padding: dp(10)
    elevation: 1
    #ripple_behavior: True
    md_bg_color: (0.93, 0.85, 0.68, 1)
    shadow_softness: 6
    shadow_color: (0.651, 0.353, 0,2)
    ripple_behavior: True
    ripple_color: (0.2392, 0.2196, 0.1725)
    ripple_alpha: 0.1


    FitImage:
        id: recipe_img

        width: dp(100)
        size_hint_x: None
        radius: dp(10)

    MDLabel:
        id: recipe_title_btn
        #size_hint_x: None
        #width: dp(150)
        theme_text_color: "Custom"
        text_color: (0.2392, 0.2196, 0.1725, 1)
        #text_color: (0.9725, 0.902, 0.7333, 1)
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        font_name: "fonts/athiti/Athiti-SemiBold.ttf"
        #on_release: app.on_recipe_select

<RecipeItem>:
    #size_hint_y: None
    #height: dp(300)

    ImageLeftWidget:
        id: recipe_img
        size_hint: None, None
        size: 150, 150
        radius: 24
        pos_hint: {"center_x": 0.5, "center_y": 0.5}


<ItemConfirm>
    on_release: root.set_icon(check)

    CheckboxLeftWidget:
        id: check
        #on_active: app.check_button_state(self, self.active)
        #group: "check"


<ScreenOne>:
    name: 'screen_one'
    #recipe_title: 'recipe_title'
    #recipe_servings: 'recipe_servings'
    #recipe_prep_time: 'recipe_prep_time'

    MDBoxLayout:
        orientation: 'vertical'

        MDGridLayout:
            cols: 2
            #padding: 20

            #MDScrollView:
                #md_bg_color: app.theme_cls.primary_color

            MDBoxLayout:
                padding: 30
                orientation: 'vertical'

                canvas.before:
                    Color:
                        rgba: (0.9765, 0.9686, 0.8745, 1)
                    Rectangle:
                        pos: self.pos
                        size: self.size

                MDBoxLayout:
                    orientation: "horizontal"
                    size_hint: None, None
                    pos_hint: {"center_x": 0.85, "center_y": 0.5}
                    height: dp(20)
                    #padding: (0, 0, 0, 0)

                    MDIconButton:
                        id: edit_btn

                        icon: "pencil"
                        theme_icon_color: "Custom"
                        icon_color: 0, 1, 0, 1
                        pos_hint: {"right": 0.98, "center_y": 0.5}
                        opacity: 1
                        on_release: app.edit_recipe()
                        disabled: False

                    MDIconButton:
                        id: delete_btn

                        icon: "delete"
                        theme_icon_color: "Custom"
                        icon_color: 1, 0, 0, 1
                        size_hint: None, None
                        pos_hint: {"center_x": 0.98, "center_y": 0.5}
                        opacity: 1
                        on_release: app.delete_recipe()
                        disabled: True

                MDLabel:
                    id: recipe_title

                    size_hint_y: 0.4
                    font_size: dp(30)
                    #text: 'Title'

                    theme_text_color: "Custom"
                    text_color: (0.1176, 0.1176, 0.1176, 1)
                    font_name: "fonts/amatica-sc/AmaticaSC-Bold.ttf"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}

                MDBoxLayout:
                    #orientation: "vertical"
                    size_hint_y: 0.1
                    #size_hint: None, None
                    spacing: dp(10)

                    MDIcon:
                        #size_hint: 0.25, 0.7
                        icon: "account-supervisor-circle"
                        font_size: dp(23)
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        theme_text_color: "Custom"
                        text_color: (0.1176, 0.1176, 0.1176, 1)


                    MDLabel:
                        id: recipe_servings

                        theme_text_color: "Custom"
                        font_name: "fonts/athiti/Athiti-Medium.ttf"
                        text_color: (0.1176, 0.1176, 0.1176, 1)


                MDBoxLayout:
                    size_hint: 0.6, None
                    #pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    spacing: dp(10)

                    MDIcon:
                        icon: "av-timer"
                        font_size: dp(26)
                        pos_hint: {"center_y": 0.6}
                        theme_text_color: "Custom"
                        text_color: (0.1176, 0.1176, 0.1176, 1)


                    MDGridLayout:
                        cols: 3
                        size_hint: 1, 0.1
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}

                        MDBoxLayout:
                            orientation: "vertical"
                            #size_hint: None, None
                            spacing: dp(15)
                            #pos_hint: {"center_x": 0.5, "center_y": 0.5}

                            MDLabel:
                                id: recipe_prep_time

                                theme_text_color: "Custom"
                                font_name: "fonts/athiti/Athiti-Medium.ttf"
                                text_color: (0.1176, 0.1176, 0.1176, 1)


                            MDLabel:
                                text: 'PREP'
                                font_size: dp(12)
                                font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                                theme_text_color: "Custom"
                                text_color: (0.1176, 0.1176, 0.1176, 0.6)


                        MDBoxLayout:
                            orientation: "vertical"
                            #size_hint: None, None
                            spacing: dp(15)

                            MDLabel:
                                id: recipe_cook_time

                                theme_text_color: "Custom"
                                font_name: "fonts/athiti/Athiti-Medium.ttf"
                                text_color: (0.1176, 0.1176, 0.1176, 1)


                            MDLabel:
                                text: 'COOK'
                                font_size: dp(12)
                                theme_text_color: "Custom"
                                font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                                text_color: (0.1176, 0.1176, 0.1176, 0.6)

                        MDBoxLayout:
                            orientation: "vertical"
                            #size_hint: None, None
                            spacing: dp(15)
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}

                            MDLabel:
                                id: recipe_total_time

                                theme_text_color: "Custom"
                                font_name: "fonts/athiti/Athiti-Medium.ttf"
                                text_color: (0.1176, 0.1176, 0.1176, 1)

                            MDLabel:
                                text: 'TOTAL'
                                theme_text_color: "Custom"
                                font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                                text_color: (0.1176, 0.1176, 0.1176, 0.6)
                                font_size: dp(12)

                MDBoxLayout:
                    orientation: 'vertical'
                    #size_hint: 1, 1

                    MDLabel:
                        size_hint_y: None
                        text: "Instructions"
                        theme_text_color: "Custom"
                        font_name: "fonts/athiti/Athiti-Medium.ttf"
                        text_color: (0.1176, 0.1176, 0.1176, 1)
                        #height: dp(30)
                        pos_hint: {"bottom": 0.9}
                        #font_size: dp(18)
                        bold: True

                    MDScrollView:
                        MDLabel:
                            id: recipe_instr
                            theme_text_color: "Custom"
                            text_color: (0.1176, 0.1176, 0.1176, 1)
                            font_name: "fonts/athiti/Athiti-Regular.ttf"
                            size_hint_y: None
                            height: self.texture_size[1]
                            #adaptive_height: True
                            #theme_text_color: "Secondary"
                            padding: dp(10)


            ######## Recipe Ingredients #########
            MDBoxLayout:
                orientation: 'vertical'
                size_hint_x: 0.7

                padding: 30
                spacing: 70

                canvas.before:
                    Color:
                        rgba: (0.9725, 0.902, 0.7333, 1)
                    Rectangle:
                        pos: self.pos
                        size: self.size

                MDSmartTile:
                    id: recipe_full_image

                    radius: 24
                    box_radius: [24, 24, 24, 24]
                    box_color: 0, 0, 0, .2
                    pos_hint: {"center_x": .5, "top": 1}
                    size_hint: None, None
                    width: "320dp"
                    height: "250dp"

                    MDIconButton:
                        id: favs_button

                        icon: "heart-outline"
                        theme_icon_color: "Custom"
                        icon_color: 1, 0, 0, 1
                        pos_hint: {"center_y": .5}
                        on_release:
                            self.icon = "heart" if self.icon == "heart-outline" else "heart-outline"
                            root.ids.favs_label.text = "Remove from Favourites" if self.icon == "heart" else "Add To Favourites"
                            app.add_or_remove_from_favourites() # if self.icon == "heart" else app.remove_from_favourites()

                    MDLabel:
                        id: favs_label
                        text: "Add to Favourites"
                        font_name: "fonts/athiti/Athiti-SemiBold.ttf"

                MDBoxLayout:
                    orientation: "vertical"

                    MDLabel:
                        size_hint_y: None
                        font_size: dp(20)
                        text: "Ingredients"
                        font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                        theme_text_color: "Custom"
                        text_color: (0.1176, 0.1176, 0.1176, 1)

                    MDScrollView:
                        MDLabel:
                            id: recipe_ingr

                            text: "Ingredients"
                            size_hint_y: None
                            height: self.texture_size[1]
                            #adaptive_height: True
                            font_name: "fonts/athiti/Athiti-Regular.ttf"
                            theme_text_color: "Custom"
                            text_color: (0.1176, 0.1176, 0.1176, 1)
                            padding: dp(10)


<ScreenTwo>:
    name: 'screen_two'

    MDBoxLayout:
        orientation: 'vertical'
        spacing: 3

        MDCard:
            size_hint_y: None
            height: dp(70)
            md_bg_color: 0.2392, 0.2196, 0.1725, 1
            #elevation: 5

            MDBoxLayout:
                orientation: 'horizontal'
                height: dp(70)

                padding: 30
                spacing: 30

                MDRaisedButton:
                    id: add_cancel_btn

                    text: "Cancel"
                    #size_hint_y: 1
                    #pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    md_bg_color: (1, 0.1, 0.1, 0.8)
                    font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                    on_release: root.cancel_add_edit_recipe()

                Widget:  # Empty widget to create spacing

                MDRaisedButton:
                    id: add_done_btn

                    text: "Done"
                    md_bg_color: (0.9725, 0.902, 0.7333, 1)
                    size_hint: None, None
                    font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                    #pos_hint: {'center_y': 0.5, 'right': 1}
                    #on_release: app.done_creating_editing_recipe()

        MDCard:
            elevation: 15
            shadow_softness: 4

            MDBoxLayout:

                MDGridLayout:
                    cols: 2
                    #spacing:0.35

                    #MDScrollView:
                        #canvas.before:
                         #   Color:
                          #      rgba: app.theme_cls.primary_color
                           # Rectangle:
                            #    pos: self.pos
                             #   size: self.size

                    MDBoxLayout:
                        orientation: 'vertical'

                        canvas.before:
                            Color:
                                rgba: (0.9765, 0.9686, 0.8745, 1)
                            Rectangle:
                                pos: self.pos
                                size: self.size


                        padding: 30
                        spacing: 30

                        MDGridLayout:
                            cols: 2
                            size_hint: 1, 0.1

                            MDLabel:
                                id: s2_recipe_title

                                text: 'Title'
                                #size_hint: 1, 0.30
                                size_hint_x: 0.5
                                font_size: dp(25)
                                font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                                theme_text_color: "Custom"
                                text_color: (0.1176, 0.1176, 0.1176, 1)

                            MDTextField:
                                id: s2_recipe_title_input
                                required: True
                                font_name: "fonts/athiti/Athiti-Regular.ttf"
                                theme_text_color: "Custom"
                                text_color: (0.1176, 0.1176, 0.1176, 1)
                                line_color_focus: (0.65098, 0.35294, 0, 1)

                        MDGridLayout:
                            cols: 2
                            size_hint: 1, 0.1

                            MDLabel:
                                text: 'Servings'
                                #size_hint: 1, 0.1
                                size_hint_x: 0.5
                                font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                                theme_text_color: "Custom"
                                text_color: (0.1176, 0.1176, 0.1176, 1)

                            MDTextField:
                                id: s2_recipe_servings

                                font_name: "fonts/athiti/Athiti-Regular.ttf"
                                theme_text_color: "Custom"
                                text_color: (0.1176, 0.1176, 0.1176, 1)
                                #max_text_length: 2
                                line_color_focus: (0.65098, 0.35294, 0, 1)


                        MDGridLayout:
                            cols: 2
                            size_hint: 1, 0.1

                            MDLabel:
                                text: 'Prep time'
                                size_hint_x: 0.5
                                font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                                theme_text_color: "Custom"
                                text_color: (0.1176, 0.1176, 0.1176, 1)

                            MDTextField:
                                id: s2_recipe_prep_time
                                max_text_length: 4
                                helper_text: "Time in minutes"
                                helper_text_mode: "on_focus"
                                line_color_focus: (0.65098, 0.35294, 0, 1)

                                font_name: "fonts/athiti/Athiti-Regular.ttf"
                                theme_text_color: "Custom"
                                text_color: (0.1176, 0.1176, 0.1176, 1)

                        MDGridLayout:
                            cols: 2
                            size_hint: 1, 0.1

                            MDLabel:
                                text: 'Cook time'
                                size_hint_x: 0.5
                                font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                                theme_text_color: "Custom"
                                text_color: (0.1176, 0.1176, 0.1176, 1)

                            MDTextField:
                                id: s2_recipe_cook_time
                                max_text_length: 4
                                helper_text: "Time in minutes"
                                helper_text_mode: "on_focus"
                                line_color_focus: "blue"
                                font_name: "fonts/athiti/Athiti-Regular.ttf"
                                theme_text_color: "Custom"
                                text_color: (0.1176, 0.1176, 0.1176, 1)
                                line_color_focus: (0.65098, 0.35294, 0, 1)

                        MDGridLayout:
                            cols: 2
                            size_hint: 1, 0.1

                            MDLabel:
                                text: 'Total time'
                                size_hint_x: 0.5
                                font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                                theme_text_color: "Custom"
                                text_color: (0.1176, 0.1176, 0.1176, 1)

                            MDTextField:
                                id: s2_recipe_total_time
                                max_text_length: 4
                                helper_text_mode: "on_focus"
                                helper_text: "Time in minutes"
                                line_color_focus: (0.65098, 0.35294, 0, 1)

                                font_name: "fonts/athiti/Athiti-Regular.ttf"
                                theme_text_color: "Custom"
                                text_color: (0.1176, 0.1176, 0.1176, 1)

                        MDBoxLayout:
                            orientation: 'vertical'

                            size_hint: 1, 0.9
                            #height: dp(120)  # Adjust this to set the minimum height of the ScrollView
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}

                            #canvas.before:
                             #   Color:
                              #      rgba: (0.9725, 0.902, 0.7333, 1)
                               # Rectangle:
                                #    pos: self.pos
                                 #   size: self.size

                            MDLabel:
                                size_hint_y: 0.3
                                #width: dp(30)
                                text: "Instructions"
                                font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                                theme_text_color: "Custom"
                                text_color: (0.1176, 0.1176, 0.1176, 1)

                            MDScrollView:
                                MDTextField:
                                    id: s2_recipe_instr

                                    required: True
                                    multiline: True
                                    line_color_focus: (0.1176, 0.1176, 0.1176, 1)
                                    font_name: "fonts/athiti/Athiti-Regular.ttf"
                                    theme_text_color: "Custom"
                                    text_color: (0.1176, 0.1176, 0.1176, 1)
                                    line_color_focus: (0.65098, 0.35294, 0, 1)

                    MDBoxLayout:
                        orientation: 'vertical'
                        #pos_hint: {"center_x": 0.5, "center_y": 0.8}
                        size_hint_x: 0.7

                        padding: 30
                        spacing: 30

                        canvas.before:
                            Color:
                                rgba: (0.9725, 0.902, 0.7333, 1)
                            Rectangle:
                                pos: self.pos
                                size: self.size

                        Image:
                            id: s2_recipe_image_display
                            #source: app.image_source
                            size_hint: 1, None
                            pos_hint: {"center_x": 0.5, "top": 0.9}
                            width: "400dp"
                            height: "217dp"
                            #allow_stretch: True
                            radius: 24

                            canvas.before:
                                StencilPush
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [24, 24, 24, 24]

                                StencilUse

                            canvas.after:
                                StencilPop

                        MDBoxLayout:
                            orientation: 'horizontal'
                            size_hint_y: None
                            height: dp(40)

                            MDIconButton:
                                icon: "camera"
                                on_release: root.show_image_chooser()

                                theme_text_color: "Custom"
                                text_color: (0.65098, 0.35294, 0, 1)

                            MDIconButton:
                                icon: "delete"
                                theme_text_color: "Custom"
                                text_color: (0.9, 0, 0.2, 0.8)
                                #text_color: (0.65098, 0.35294, 0, 1)
                                on_release: root.remove_image()


                        MDBoxLayout:
                            orientation: "vertical"

                            size_hint: 1, 0.9
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}

                            padding: 30
                            spacing: 30

                            MDLabel:
                                text: "Ingredients"
                                size_hint_y: None
                                font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                                theme_text_color: "Custom"
                                font_size: dp(18)
                                text_color: (0.1176, 0.1176, 0.1176, 1)

                            MDScrollView:
                                MDTextField:
                                    id: s2_recipe_ingr

                                    multiline: True
                                    required: True
                                    font_name: "fonts/athiti/Athiti-Regular.ttf"
                                    theme_text_color: "Custom"
                                    text_color: (0.1176, 0.1176, 0.1176, 1)
                                    line_color_focus: (0.65098, 0.35294, 0, 1)

DishDossierController:
    orientation: 'horizontal'
    spacing:1

    ######## SIDEBAR #########
    MDCard:
        size_hint_x: None  # Fixed width
        width: 210
        md_bg_color: 0.2392, 0.2196, 0.1725, 1
        elevation: 10

        border_radius: dp(5)
        border_width: dp(55)
        border_color: 0, 1, 0, 1

        MDBoxLayout:
            orientation: 'vertical'
            #size_hint_x: None  # Fixed width

            padding: 5, 20,

            Image:
                size_hint: None, None
                size: 200, 80
                source: "assets/images/logo.png"

            MDBoxLayout:
                orientation: "vertical"
                #spacing: 50

                MDNavigationRail:
                    id: nav_rail

                    size_hint_x: None
                    width: 200

                    md_bg_color: 0, 0, 0, 0
                    theme_text_color: "Custom"
                    font_name: "fonts/athiti/Athiti-SemiBold.ttf"
                    text_color: (0.9569, 0.9569, 0.9569, 1)
                    #specific_text_color: "#e7e4c0"
                    icon_color_item_normal: (0.651, 0.353, 0, 1)
                    icon_color_item_active: (0.2392, 0.2196, 0.1725, 1)
                    selected_color_background: (0.9725, 0.902, 0.7333, 1)
                    anchor: 'center'
                    ripple_color_item: [0.1176, 0.1176, 0.1176, 0.1]


                    MDNavigationRailItem:
                        text: 'All Recipes'
                        icon: 'rss'
                        on_release: app.on_recipe_list_select('all_recipes') #if self.state != 'Down'

                    MDNavigationRailItem:
                        text: 'My Recipes'
                        icon: 'bookshelf'
                        on_release: app.on_recipe_list_select('my_recipes') #if self.state != 'Down'

                    MDNavigationRailItem:
                        text: 'Favourites'
                        icon: 'notebook-heart-outline'
                        font_name: "nasalization-rg.ttf"
                        padding_top: dp(8)
                        on_release: app.on_recipe_list_select('favourites') #if self.state != 'Down'

                    MDNavigationRailItem:
                        text: 'Meal Planner'
                        icon: 'calendar-multiselect'
                        on_press: app.on_recipe_list_select()  #app.transition_to('meal_planner')



    ######### RECIPE LIST #########
    MDCard:
        elevation: 5
        size_hint: 0.4, 1

        MDBoxLayout:
            orientation: 'vertical'
            #size_hint: 0.4, 1

            canvas.before:
                Color:
                    rgba: (0.9725, 0.902, 0.7333, 1)
                Rectangle:
                    pos: self.pos
                    size: self.size

            spacing: 30
            padding: 30

            ###### SEARCH BAR ######
            MDGridLayout:
                cols: 3
                size_hint: 1, 0.1
                #valign: "middle"
                spacing: 30


                MDIconButton:
                    id: search_by_btn

                    icon: "filter-outline"
                    size_hint: None, None
                    #icon_size: "26sp"
                    theme_text_color: "Custom"
                    icon_color: (0.65098, 0.35294, 0, 1)
                    #pos_hint: {'center_x': 0.5, "bottom": 0.1}
                    on_release: app.show_search_by_options()

                MDTextField:
                    id: search_text

                    hint_text: "Search"
                    size_hint_y: None
                    #pos_hint: {'center_y': 0.9}
                    icon_right: "magnify"
                    mode: "round"
                    theme_text_color: "Custom"
                    fill_color_normal: (0.9765, 0.9686, 0.8745, 1)  ### OFF WHITE
                    hint_text_color_normal: 0.2392, 0.2196, 0.1725, 1
                    text_color_focus: 0.2392, 0.2196, 0.1725, 1
                    line_color_focus: (0.65098, 0.35294, 0, 1)
                    line_color_normal: (0.65098, 0.35294, 0, 1)
                    #text_color: 0.2392, 0.2196, 0.1725, 1 ### BROWN
                    #icon_color: (0.65098, 0.35294, 0, 1) ### ORANGE
                    icon_right_color_normal: 0.2392, 0.2196, 0.1725, 1
                    icon_right_color_focus: (0.75, 0.45, 0.1, 1)
                    #helper_text: "Search"
                    font_name: "fonts/athiti/Athiti-Medium.ttf"
                    on_text_validate: app.search_for_recipe(self.text)


                MDIconButton:
                    icon: "hamburger-plus"
                    #valign: "center"
                    #icon_size: "25sp"
                    size_hint: None, None
                    #width: dp(34)
                    theme_text_color: "Custom"
                    icon_color: (0.65098, 0.35294, 0, 1)
                    #pos_hint: {"center_x": 0.5, "center_y": 0}
                    on_release: app.switch_screen()


            ###### Recipe List #######
            MDBoxLayout:
                orientation: 'vertical'

                MDScrollView:
                    id:recipe_scroll
                    padding: 50
                    on_scroll_stop: app.on_scroll_stop(self.scroll_y)

                    RecipeList:
                        id: recipe_list
                        spacing: 10
                        #divider: "Full"
                        #divider_color: (0.2392, 0.2196, 0.1725, 1)


                MDFillRoundFlatButton:
                    id: show_more_btn
                    text: "Show more"
                    opacity: 0
                    pos_hint: {"center_x": .5}
                    on_release: app.show_more_recipes()


    ######## Recipe Info ########
    MDScreenManager:
        id: screens

        ScreenOne:
            id: screen_one
            #transition: NoTransition()

        ScreenTwo:
            id: screen_two
            #transition: NoTransition()

